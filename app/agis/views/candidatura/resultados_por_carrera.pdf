{{
from agiscore.db import plan_curricular
from agiscore.db import nota
from agiscore.db.carrera_uo import carrera_uo_format
}}

{{
# recolecci√≥n de datos
c = response.context
uo = db.unidad_organica(c.unidad_organica_id)
escuela = db.escuela(uo.escuela_id)
carrera = db.carrera_uo(c.carrera_uo_id)
}}

{{def text(atext):
    return XML(atext.decode("utf-8"))
    pass
}}

<font face='DejaVu' size='10'>
<center><p><b>{{=text(escuela.nombre)}}</b></p></center>
<center><p><b>{{=text(uo.nombre)}}</b></p></center>
<center><p>{{=text(T("Resultados para %s", carrera_uo_format(carrera)))}}</p></center>
<table align="center" border="0" width="90%">
    <tr>
        <th align="left" width="10%">{{=text(T("# Ins."))}}</th>
        <th align="left" width="30%">{{=text(T("Nombre"))}}</th>
        {{for a_id in asignaturas:}}
        <th align="left" width="10%">{{=text(db.asignatura(a_id).abreviatura)}}</th>
        {{pass}}
        <th align="left" width="10%">{{=text(T("Media"))}}</th>
        <th align="left" width="10%">{{=text(T("Estado"))}}</th>
    </tr>
            {{for row in rows:}}
                <tr>
                    <td>{{=text(row.ninscripcion)}}</td>
                    <td>{{=text(row.nombre)}}</td>
                    {{for n in row.notas:}}
                    <td>{{=n}}</td>
                    {{pass}}
                    <td>{{="{0:0>5.2f}".format(row.media)}}</td>
                    <td>{{=text(row.estado)}}</td>
                </tr>
            {{pass}}
</table>
</font>
